<p><a name="Contents"></a></p>
<h1>Contents</h1>
<ul>
<li><a href="about?id=setup#InstallTools"> Install tools and clone repository </a></li>
<li><a href="about?id=setup#DevelopVsCode"> Develop with VsCode </a></li>
<li><a href="about?id=setup#DevelopVS"> Develop with Visual Studio </a></li>
<li><a href="about?id=setup#DevelopOther"> Develop on other platforms </a></li>
<li><a href="about?id=setup#Database"> Database </a></li>
<li><a href="about?id=setup#GoogleCloud"> Google Cloud Platform account </a></li>
<li><a href="about?id=setup#GoogleApi"> Google API Keys </a></li>
</ul>
<p>These documentation pages can be found in FrontEnd/ClientApp/src/app/assets/docs. Please make corrections there and issue
a <a href="https://github.com/govmeeting/govmeeting"> pull request on Gitub. </a></p>
<hr />
<p><a name="InstallTools"></a></p>
<h1>Install tools and clone repository <br/></h1>
<p><a href="about?id=setup#Contents"> [Contents] </a></p>
<ul>
<li>Install git.  <a href="https://gitforwindows.org"> Git for Windows </a>, <a href="https://git-scm.com/download/mac"> Git for Mac </a></li>
<li>Install <a href="https://nodejs.org/en/download/"> Node.js. </a></li>
<li>Install <a href="https://dotnet.microsoft.com/download"> .Net Core SDK. </a></li>
<li>&quot;Fork&quot; the the project on github</li>
<li>Clone the project locally</li>
<li>Create a sibling folder to the cloned repositiory named &quot;_SECRETS&quot;</li>
</ul>
<p>The &quot;_SECRETS&quot; folder is for keys and passwords that are not stored in the public repository. These would be needed to run Google API services.</p>
<hr />
<p><a name="DevelopVsCode"></a></p>
<h1>Develop with VsCode <br/></h1>
<p><a href="about?id=setup#Contents"> [Contents] </a></p>
<h2>Install VsCode</h2>
<ul>
<li>Install <a href="https://code.visualstudio.com/download"> Visual Studio Code </a> and start it.</li>
<li>Open extensions left side panel and install:
<ul>
<li>“Debugger for Chrome” by Microsoft</li>
<li>&quot;C# for Visual Studio Code&quot; by Microsoft</li>
<li>&quot;SQL Server (mssql)&quot; by Microsoft</li>
<li>&quot;Todo Tree&quot; by Gruntfuggly - shows TODO lines in code (optional)</li>
<li>&quot;Powershell&quot; by Microsoft - for debugging Powershell build scripts (optional)</li>
</ul>
</li>
</ul>
<h2>Debug/Run ClientApp &amp; WebApp</h2>
<ul>
<li>Open the Govmeeting folder in VsCode</li>
<li>Open a terminal pane in VsCode</li>
<li>cd FrontEnd/ClientApp</li>
<li>npm install</li>
<li>npm start</li>
<li>In debug panel, set launch configuration &quot;WebApp &amp; ClientApp-W&quot;</li>
<li>Press F5 (debug) or Ctrl-F5 (run without debugging)</li>
</ul>
<p>The ClientApp will open in a browser.</p>
<ul>
<li>Click any of the &quot;About&quot; menu items to see the documentation.</li>
<li>Click the location menu item &quot;Boothbay Harbor&quot;. You will see the dashboard open for this location.</li>
</ul>
<p>To verify that ClientApp is calling the WebApp API to retrieve data.</p>
<ul>
<li>Click &quot;Proofread Transcript&quot;. You will see a video pane and transcribed text. Click the video play button.</li>
<li>Click &quot;Add Tags to Transcript&quot;. You will see a transcript of a meeting to be tagged.</li>
<li>Click &quot;View Latest Meeting&quot;. You will see a completed transcript for viewing.</li>
</ul>
<p>Most of the other dashboard cards do not call WebApp but return test data.</p>
<p>ClientApp is served by the webpack-dev-server started with &quot;npm start&quot;.
WebApp uses the Kestrel server included in Asp.Net Core. The Kestrel server responds to Web API calls. But it proxies internal ClientApp requests to the webpack-dev-server.</p>
<h2>Debug/Run ClientApp standalone</h2>
<ul>
<li>In app.module.ts, change &quot;isAspServerRunning&quot; from true to false.</li>
<li>npm start</li>
<li>In debug panel, set launch configuration &quot;ClientApp&quot;</li>
<li>Press F5 (debug) or Ctrl-F5 (run without debugging)</li>
</ul>
<p>When &quot;isAspServerRunning&quot; is set to false, stub services are used, instead of calling the WebApp API. This is useful for when we are only modifying code in ClientApp.</p>
<h2>Debug/Run WorkflowApp</h2>
<ul>
<li>In debug panel, set launch configuration &quot;WorkflowApp&quot;</li>
<li>Press F5 (debug) or Ctrl-F5 (run without debugging)</li>
</ul>
<p>When the WorkflowApp starts it:</p>
<ul>
<li>Copies some test files into the Datafles/RECEIVED folder: a transcript PDF file and a recording MP4 file.</li>
<li>Processes the transcript PDF file and creates a JSON file ready to be tagged.</li>
<li>Process the recording MP4 file by transcribing it in the cloud and creates a JSON file ready to be proofread.</li>
</ul>
<p>The results can be found in Datafiles/PROCESSING. However, you will first need to  setup a <a href="about?id=setup#GoogleCloud">Google Cloud account </a>, for the recording to be transcribed.</p>
<hr />
<p><a name="DevelopVS"></a></p>
<h1>Develop with Visual Studio <br/></h1>
<p><a href="about?id=setup#Contents"> [Contents] </a></p>
<ul>
<li>Install  the free <a href="https://visualstudio.microsoft.com/free-developer-offers/"> Visual Studio Community Edition. </a></li>
<li>During installation, select both the &quot;ASP.NET&quot; and the &quot;.NET desktop&quot; workloads.</li>
<li>Install extensions:  (all by Mads Kristensen)
<ul>
<li>&quot;NPM Task Runner&quot;</li>
<li>&quot;Command Task Runner&quot;</li>
<li>&quot;Markdown Editor&quot;</li>
</ul>
</li>
<li>Open the solution file &quot;govmeeting.sln&quot;</li>
</ul>
<h2>Debug/Run ClientApp &amp; WebApp</h2>
<ul>
<li>In Task Runner Explorer (ClientApp):
<ul>
<li>run &quot;install&quot;</li>
<li>run &quot;start&quot;</li>
</ul>
</li>
<li>Set startup project to &quot;WebApp&quot;</li>
<li>Press F5 (debug) or Ctrl-F5 (run without debugging)</li>
<li>WebApp will run and a browser will open, displaying the ClientApp.</li>
</ul>
<p>NOTE: There is an issue with setting breakpoints in the Angular ClientApp in Visual Studio. See: <a href="https://github.com/govmeeting/govmeeting/issues/80"> Github issue #80 </a></p>
<h2>Debug WorkflowApp</h2>
<ul>
<li>Open the debug panel.</li>
<li>Set startup project to &quot;WorkflowApp&quot;</li>
<li>Press F5 (debug) or Ctrl-F5 (run without debugging)</li>
</ul>
<p>Note: See notes for WorkflowApp under &quot;Visual Studio Code&quot;</p>
<hr />
<p><a name="DevelopOther"></a></p>
<h1>Develop on other platforms <br/></h1>
<p><a href="about?id=setup#Contents"> [Contents] </a></p>
<p>In your profile, set the environment variable, ASPNETCORE_ENVIRONMENT, to &quot;Development&quot;. This is used by WebApp and WorkflowApp.</p>
<h2>Build and run ClientApp</h2>
<p>Execute:</p>
<ul>
<li>cd Frontend/ClientApp</li>
<li>npm install</li>
<li>npm start</li>
</ul>
<p>Go to localhost:4200 in your browser. The client app will load.
Some features will not work until WebApp is running.</p>
<h2>Build and run WebApp with ClientApp</h2>
<p>Execute:</p>
<ul>
<li>(do above: &quot;Build &amp; start ClientApp&quot;)</li>
<li>cd ../../Backend/WebApp</li>
<li>dotnet build webapp.csproj</li>
<li>dotnet run bin/debug/dotnet2.2/webapp.dll</li>
</ul>
<p>Go to localhost:5000 in your browser. The client app will load.</p>
<h2>Build and run ClientApp standalone</h2>
<ul>
<li>In app.module.ts, change &quot;isAspServerRunning&quot; from true to false.</li>
<li>(do above: &quot;Build &amp; start ClientApp&quot;)</li>
</ul>
<h2>Build and run WorkflowApp</h2>
<p>Execute:</p>
<ul>
<li>cd Backend/WorkflowApp</li>
<li>dotnet build workflowapp.csproj</li>
<li>dotnet run bin/debug/dotnet2.0/workflowapp.dll</li>
</ul>
<p>Note: See notes for WorkflowApp under &quot;Visual Studio Code&quot;</p>
<!-- END OF README SECTION -->
<hr />
<p><a name="Database"></a></p>
<h1>Database <br/></h1>
<p><a href="about?id=setup#Contents"> [Contents] </a></p>
<p>You may not need to install and setup the database in order to do development. There are test stubs that substitute for calling database. See &quot;Test Stubs&quot; below.</p>
<h2>Install Provider</h2>
<p>If you are using Visual Studio or Visual Studio Code, the Sql Server Express LocalDb provider is already installed. Otherwise do &quot;LocalDb Provider Installation&quot; below.</p>
<h3>LocalDb Provider Installation</h3>
<p>Go to <a href="https://www.microsoft.com/en-us/sql-server/sql-server-downloads"> Sql Server Express. </a>
For Windows, download the &quot;Express&quot; specialized edition of SQL Server. During installation, choose &quot;Custom&quot; and select &quot;LocalDb&quot;.</p>
<p>LocalDb is available also for MacOs and Linux. If you install it for either platform, please update this document with the steps and do a Pull Request.</p>
<h3>Other Providers</h3>
<p>Besides LocalSb, EF Core supports <a href= "https://docs.microsoft.com/en-us/ef/core/providers/?tabs=dotnet-core-cli"> other providers, </a> which you can use for development, including SqlLite. You will need to modify the DbContext setup in startup.cs and the connection string in
appsettings.json.</p>
<h2>Build Database Schema</h2>
<p>The database is built via the &quot;code first&quot; feature of Entity Framework Core.  It examines the C# classes in the data model and automatically creates all tables and relations. There are two steps: (1) Create the &quot;migrations&quot; code for doing the update and (2) execute the update.</p>
<ul>
<li>cd Backend/WebApp</li>
<li>dotnet ef migrations add initial --project ..\Database\DatabaseAccess_Lib</li>
<li>dotnet ef database update --project ..\Database\DatabaseAccess_Lib</li>
</ul>
<h2>Explore the created database</h2>
<h3>In VsCode</h3>
<p>Add the following to your user settings.json in VsCode:</p>
<pre><code>    &quot;mssql.connections&quot;: [
        {
          &quot;server&quot;: &quot;(localdb)\\mssqllocaldb&quot;,
          &quot;database&quot;: &quot;Govmeeting&quot;,
          &quot;authenticationType&quot;: &quot;Integrated&quot;,
          &quot;profileName&quot;: &quot;GMProfile&quot;,
          &quot;password&quot;: &quot;&quot;
        }
      ],    

</code></pre>
<ul>
<li>Press ctrl-alt-D or press the Sql Server icon on left margin.</li>
<li>Open the GMProfile connection to view &amp; work with database objects.</li>
<li>Open &quot;Tables&quot;. You should see all tables created when you
built the schema above. This includes the AspNetxxxx tables
for authorizaton and the tables for the Govmeeting data model.</li>
</ul>
<h3>In Visual Studio</h3>
<ul>
<li>Go to menu item: View -&gt; SQL Server Object Explorer.</li>
<li>Expand SQL Server -&gt; (localdb)\MSSQLLocalDb -&gt; Databases -&gt; Govmeeting</li>
<li>Open &quot;Tables&quot;. You should see all tables created when you
built the schema above. This includes the AspNetxxxx tables
for authorizaton and the tables for the Govmeeting data model.</li>
</ul>
<h3>Other platforms</h3>
<p>There is the cross-platform and open source <a href="https://github.com/Microsoft/sqlopsstudio?WT.mc_id=-blog-scottha"> SQL Operations Studio,</a> &quot;a data management tool that enables working with SQL Server, Azure SQL DB and SQL DW from Windows, macOS and Linux.&quot; You can download <a href="https://docs.microsoft.com/en-us/sql/sql-operations-studio/download?view=sql-server-2017&WT.mc_id=-blog-scottha"> SQL Operations Studio free here.</a></p>
<p>If you use this, or another tool, for exploring SQL Server databases, please update these instructions.</p>
<h2>Test Stubs</h2>
<p>The code to store/retrieve transcript data in the database is not yet written. Therefore DatabaseRepositories_Lib uses static test data instead. In WebApp/appsettings.json, the property &quot;UseDatabaseStubs&quot; is set to &quot;true&quot;, telling it to call the stub routines.</p>
<p>However the user registration and login code in WebApp does use the database. It accesses the Asp.Net user authentication tables. WebApp authenticates API calls from ClientApp based on the current logged in user.</p>
<p>You can use the &quot;NOAUTH&quot; pre-processor value in WebApp to bypass authentication. Use one of these methods:</p>
<ul>
<li>In FixasrController.cs or AddtagsController.cs, un-comment the &quot;#if NOAUTH&quot; line at the top of the file.</li>
<li>To disable it for all controllers, add this to WebApp.csproj:</li>
</ul>
<pre><code>    &lt;PropertyGroup Condition=&quot;'$(Configuration)|$(Platform)'=='Debug|AnyCPU'&gt;
    &lt;DefineConstants&gt;NOAUTH&lt;/DefineConstants&gt;
    &lt;/PropertyGroup&gt;
</code></pre>
<ul>
<li>In Visual Studio, go to WebApp property pages -&gt; Build -&gt;
and enter NOAUTH in the &quot;Conditional Compiliation Symbols&quot; box.</li>
</ul>
<hr />
<p><a name="GoogleCloud"></a></p>
<h1>Google Cloud Platform account <br/></h1>
<p><a href="about?id=setup#Contents"> [Contents] </a></p>
<p>To use the Google Speech APIs for speech-to-text conversion, you need a Google Cloud Platform (GCP) account. For most development work in Govmeeting, you can use use existing test data. But if you want transcribe new recordings, you will a GCP. The Google API is able to transcribe recordings in more than 120 languages and variants.</p>
<p>Google provides developers with a free account which includes a credit (currently $300). The current cost of using the Speech API is free for up 60 minutes of conversion per month. After that, the cost for the &quot;enhanced model&quot; (which is what we need) is $0.009 per 15 seconds. ($2.16 per hour)</p>
<ul>
<li>
<p>Open an account with <a href="https://cloud.google.com/free/">Google Cloud Platform</a></p>
</li>
<li>
<p>Go to the <a href="http://console.cloud.google.com">Google Cloud Dashboard</a> and create a project.</p>
</li>
<li>
<p>Go to the <a href="http://console.developers.google.com">Google Developer's Console</a> and enable the Speech &amp; Cloud Storage APIs</p>
</li>
<li>
<p>Generate a &quot;service account&quot; credential for this project. Click on Credentials in developer's console.</p>
</li>
<li>
<p>Give this account &quot;Editor&quot; permissions on the project. Click on the account. On the next page, click Permissions.</p>
</li>
<li>
<p>Download the credential JSON file.</p>
</li>
<li>
<p>Put the file in the <code>_SECRETS</code> folder that you created when you cloned the repo.</p>
</li>
<li>
<p>Rename the file <code>TranscribeAudio.json</code>.</p>
</li>
</ul>
<p>NOTE: The above steps may have changed slightly. If so, please update this document.</p>
<h2>Test Speech to Text transcription</h2>
<ul>
<li>
<p>Set the startup project in Visual Studio to <code>Backend/WorkflowApp</code>. Press F5.</p>
</li>
<li>
<p>Copy (don't move) one of the sample MP4 files from testdata to Datafiles/RECEIVED.</p>
</li>
</ul>
<p>The program will now recognize that a new file has appeared and start processing it.
The MP4 file will be moved to &quot;COMPLETED&quot; when done. You will see the results in
sufolders, which were created in the &quot;Datafiles&quot; directory.</p>
<p>In appsettings.json, there is a property &quot;RecordingSizeForDevelopment&quot;. It is currently
set to &quot;180&quot;. This causes the transcription routine in ProcessRecording_Lib to process only the first 180 seconds of the recording.</p>
<hr />
<p><a name="GoogleApi"></a></p>
<h1>Google API Keys <br/></h1>
<p><a href="about?id=setup#Contents"> [Contents] </a></p>
<p>You will need these keys if you want to use or work on certain features of the registration and login process.</p>
<ul>
<li>ReCaptcha keys are needed to use ReCaptcha during user registration. They can be obtained at the <a href="https://developers.google.com/recaptcha/">Google reCaptcha</a>.</li>
<li>OAuth 2.0 credentials are used to do external user login without the need for the user to created a personal account on the site. Visit the  <a href="https://console.developers.google.com/">Google API Console</a> to obtain credentials such as a client ID and client secret.</li>
</ul>
<p>Create a file named &quot;appsettings.Development.json&quot; in the &quot;_SECRETS&quot; folder. It should contain the keys that you just obtained:</p>
<pre><code>{
 &quot;ExternalAuth&quot;: {
	&quot;Google&quot;: {
	     &quot;ClientId&quot;: &quot;your-client-Id&quot;,
	     &quot;ClientSecret&quot;: &quot;your-client-secret&quot;
    }
  },
  &quot;ReCaptcha:SiteKey&quot;: &quot;your-site-key&quot;,
  &quot;ReCaptcha:Secret&quot;: &quot;your-secret&quot;
}
</code></pre>
<hr />
<h2>Test reCaptcha</h2>
<ul>
<li>Run the WebApp project.</li>
<li>Click on &quot;Register&quot; in the upper right.</li>
<li>The reCaptcha option should appear.</li>
</ul>
<hr />
<h2>Test Google Authentication</h2>
<ul>
<li>Run the WebApp project.</li>
<li>Click on &quot;Login&quot; in the upper right.</li>
<li>Under &quot;Use another service to log in&quot;, choose &quot;Google&quot;.</li>
</ul>
